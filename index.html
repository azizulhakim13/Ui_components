<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="assets/css/style.css">
    <link rel="stylesheet" href="assets/fonts/stylesheet.css">
    <title>Document</title>

  <style>
    body {
  margin: 20px;
}
input {
  width: 250px;
  padding: 10px;
  border-radius: 2px;
  border: 1px solid #ccc;
}
input::placeholder {
  color: #BBB;
}
  </style>
</head>
<body style="font-family: monospace;">

  <div class="text-center text-large mt-3">
    <a href="#" class="social-button" target="_blank">
      Hello
    </a>
  </div>
  <div class="container pt-5">
    <details>
      <summary>Click to view</summary>
      <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. <q>Non ea similique beatae</q>, quas <mark>recusandae</mark> dolores.</p>
    </details>
    <div class="d-flex py-5">
      <p class="pe-5">Follow <abbr title="Azizul Hakim">Me</abbr> On Linkedin</abbr></p>
      <div>
        <ruby>Md. <rt>Firstname</rt></ruby>
        <ruby class="px-3">Azizul <rt>Middlename</rt></ruby>
        <ruby>Hakim <rt>Lastname</rt></ruby>
      </div>
    </div>
    <!-- Centering a content -->
    <div class="position-relative pt-5">
      <h2 class="fw-semibold text-center ">Centering a content</h2>
      <div style="display: grid; place-items: center;">
        <a href="#" class="btn btn-outline-dark">Grid</a>                                                       
      </div>
      <div class="py-3" style="display: flex; justify-content: center; align-items: center;">
        <a href="#" class="btn btn-dark">Flex</a>
      </div>
      <div class="z-n1" style="position: absolute; top: 50%; left: 50%; margin-right: -50%; transform: translate(-50%, -50%);">
        <a href="#" class="btn btn-outline-warning">Position</a>
      </div>
      <div style="margin: 0 auto; width: 50%; display: block;">
        <a href="#" class="btn btn-warning">Margin</a>
      </div>
    </div>
    <!-- Centering a content -->


    <h1>International Telephone Input</h1>

    <form action="#" class="needs-validation" novalidate>
      <div class="form-group ml-2 mt-2">

        <input type="tel" id="phone" class="tel-input" required="required" name="phone" pattern="^[0-9]+$">
        <div class="invalid-feedback"></div>
      </div>
      
    <div class="form-group mt-2">
      <button id="save" class="btn btn-primary waves-effect waves-button-input" type="submit">Test submit</button>
    </div>
      
    </form>

    
  </div>


    <script src="assets/js/jquery-3.6.0.min.js"></script>
    <script src="assets/js/bootstrap.bundle.min.js"></script>
    <script src="assets/js/all.min.js"></script>
    <script>
      // Input phone number validation
var input = document.querySelector("#phone");
var iti = window.intlTelInput(input, {
  utilsScript: "https://cdn.jsdelivr.net/npm/intl-tel-input@16.0.3/build/js/utils.js",
});

// store the instance variable so we can access it in the console e.g. window.iti.getNumber()
window.iti = iti;

(function ($) {

 $('form').on('submit', function(e) {
   e.preventDefault();
   e.stopPropagation();

   let form = $(this).get(0);
   $('form').addClass('was-validated');

   //Need to display invalid feedback explicitly on submit for input fields due to plugin changing structure
   $('form .tel-input').each(function() {
       let telInput = $(this).get(0);
       if($(this).prop('required') && !telInput.checkValidity()) {
         $(this).parents('.form-group').find('.invalid-feedback').show();
       }
     });

   });
  
  input.addEventListener("countrychange", function() {
    let isValidNumber = iti.isValidNumber();
    checkPhoneValidation($(this), isValidNumber);
  });

  $('form').on('keyup', '.tel-input', function (event) {
    let isValidNumber = iti.isValidNumber();
    checkPhoneValidation($(this), isValidNumber);
  });
     
})(jQuery);  

function checkPhoneValidation(element, isValidNumber)
{

  let invFeedbackDiv = element.parents('.form-group').find('.invalid-feedback');
  input = element.get(0);

      if(isValidNumber) {
        //need to set this first as otherwise input validity is falsely linking to custom error
        input.setCustomValidity('');
    }
  
  if(isValidNumber && input.validity.valid) {
    input.setCustomValidity('');
    invFeedbackDiv.hide();
  } else {
    invFeedbackDiv.html('Invalid phone number');
    input.setCustomValidity('invalid');

    if($('form').hasClass('was-validated')) {
      invFeedbackDiv.show();
    }
  } 
}
    </script>
    <script src="assets/js/script.js"></script>
</body>
</html> 